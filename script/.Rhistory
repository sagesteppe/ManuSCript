library(igraph)
flare
edges <- flare$edges
vertices <- flare$vertices
mygraph <- graph_from_data_frame( edges, vertices=vertices )
plot(mygraph)
edges <- flare$edges
vertices <- flare$vertices
mygraph <- graph_from_data_frame( edges, vertices=vertices )
plot(mygraph)
ggraph(mygraph, layout = 'circlepack') +
geom_node_circle() +
theme_void()
View(vertices)
View(edges)
View(vertices)
View(edges)
View(vertices)
edges
View(vertices)
View(edges)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Regional_Plant_Taxa_List', 'Spatial_Filtering'),
to = c('Regional_Plant_Taxa_List', 'Spatial_Filtering', 'Temporal_Filtering'),
)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Regional_Plant_Taxa_List', 'Spatial_Filtering'),
to = c('Regional_Plant_Taxa_List', 'Spatial_Filtering', 'Temporal_Filtering')
)
View(edges1)
vertices1 <- data.frame(
Approach =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
SpeciesCount = c(14000, 1295, 425, 346),
Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
'Occurrence data create a list of candidate taxa likely to occur in the study area',
'Spatial filtering of Occurrence data retains species likely to be present in study sites',
'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
)
)
View(vertices)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
SpeciesCount = c(14000, 1295, 425, 346),
Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
'Occurrence data create a list of candidate taxa likely to occur in the study area',
'Spatial filtering of Occurrence data retains species likely to be present in study sites',
'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
)
)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
'Occurrence data create a list of candidate taxa likely to occur in the study area',
'Spatial filtering of Occurrence data retains species likely to be present in study sites',
'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
)
)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Regional_Plant_Taxa_List', 'Spatial_Filtering'),
to = c('Regional_Plant_Taxa_List', 'Spatial_Filtering', 'Temporal_Filtering')
)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
'Occurrence data create a list of candidate taxa likely to occur in the study area',
'Spatial filtering of Occurrence data retains species likely to be present in study sites',
'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
)
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
View(vertices1)
library(tidyverse)
library(ggraph)
library(igraph)
edges <- flare$edges
vertices <- flare$vertices
View(vertices)
View(vertices)
View(edges)
View(vertices)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Regional_Plant_Taxa_List', 'Spatial_Filtering'),
to = c('Regional_Plant_Taxa_List', 'Spatial_Filtering', 'Temporal_Filtering')
)
View(edges1)
View(edges)
View(edges1)
View(vertices)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
View(mygraph1)
View(edges)
View(vertices)
View(edges)
View(vertices)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering'),
to = c('Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering')
)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
View(edges1)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering'),
to = c('Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering')
)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
View(edges1)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
View(vertices1)
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
ggraph(mygraph1, layout = 'circlepack')
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle()
mygraph1
ggraph(mygraph, layout = 'circlepack') +
geom_node_circle()
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle()
View(edges)
edges1 <- data.frame(
from =  c('A353', 'A353.RPTL',
'A353.RPTL.SF'),
to = c('A353.RPTL',
'A353.RPTL.SF',
'A353.RPTL.SF.TF')
)
vertices1 <- data.frame(
name =
c('A353', 'A353.RPTL.','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
View(edges)
View(edges1)
vertices1 <- data.frame(
name =
c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle()
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
geom_void()
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
ggraph(mygraph1, layout = 'circlepack', weight=size) +
geom_node_circle() +
theme_void()
edges <- flare$edges
vertices <- flare$vertices
View(edges)
View(vertices)
vertices1 <- data.frame(
name =
c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
View(vertices1)
rep(c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'), 2)
vertices1 <- data.frame(
name =
rep(c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'), 2),
size = c(14000, 1295, 425, 346, 0, 0, 0, 0),
shortName = rep(c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'), 2)
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
edges1 <- data.frame(
from =  c('A353', 'A353.RPTL',
'A353.RPTL.SF'),
to = c('A353.RPTL',
'A353.RPTL.SF',
'A353.RPTL.SF.TF')
)
vertices1 <- data.frame(
name =
rep(c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'), 2),
size = c(14000, 1295, 425, 346, 0, 0, 0, 0),
shortName = rep(c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'), 2)
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
vertices1 <- data.frame(
name =
c('A353-leaf', 'A353.RPTL-leaf','A353.RPTL.SF-leaf', 'A353.RPTL.SF.TF-leaf',
'A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346, 0, 0, 0, 0),
shortName = rep(c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'), 2)
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
edges1 <- data.frame(
from =  c('A353', 'A353.RPTL', 'A353.RPTL.SF',
'A353-leaf', 'A353.RPTL-leaf','A353.RPTL.SF-leaf'),
to = c('A353.RPTL', 'A353.RPTL.SF', 'A353.RPTL.SF.TF',
'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF')
)
edges1 <- data.frame(
from =  c('A353', 'A353.RPTL', 'A353.RPTL.SF',
'A353-leaf', 'A353.RPTL-leaf','A353.RPTL.SF-leaf'),
to = c('A353.RPTL', 'A353.RPTL.SF', 'A353.RPTL.SF.TF',
'A353.RPTL-leaf','A353.RPTL.SF-leaf', 'A353.RPTL.SF.TF-leaf')
)
vertices1 <- data.frame(
name =
c('A353-leaf', 'A353.RPTL-leaf','A353.RPTL.SF-leaf', 'A353.RPTL.SF.TF-leaf',
'A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346, 0, 0, 0, 0),
shortName = rep(c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'), 2)
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack', weight=size) +
geom_node_circle() +
theme_void()
rlang::last_trace()
View(mygraph1)
vertices1
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
9 + 8.5 + 8.75 + 8.5
setwd("~/Documents/ManuSCript/script")
library(tidyverse)
commonCrestedButteBees <- c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')
dat <- read.csv('../data/Bombus_queen_observations_2015-2022.csv') %>%
filter(resource.coll != 'nectar', species %in% commonCrestedButteBees)
plant_spp_by_bee <- dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n)
plant_spp_by_bee
min(plant_spp_by_bee)
mean(plant_spp_by_bee)
median(plant_spp_by_bee)
max(plant_spp_by_bee)
pl_stats <- dat %>%
select(plant.species) %>%
separate(plant.species, c('genus', 'species'), remove = F)
pl_stats %>%  # number of plant species.
distinct(plant.species) %>%
nrow()
pl_stats %>%  # no of genera by Weber
distinct(genus) %>%
nrow()
pl_stats %>%  # the names of the genera
distinct(genus)
pl_stats %>%  # number of plant species.
distinct(plant.species, .keep_all = T) %>%
nrow()
pl_stats %>%  # number of plant species.
distinct(plant.species, .keep_all = T)
setwd("~/Documents/ManuSCript/script")
library(tidyverse)
commonCrestedButteBees <- c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')
dat <- read.csv('../data/Bombus_queen_observations_2015-2022.csv') %>%
filter(resource.coll != 'nectar', species %in% commonCrestedButteBees)
plant_spp_by_bee <- dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n)
plant_spp_by_bee
min(plant_spp_by_bee)
mean(plant_spp_by_bee)
median(plant_spp_by_bee)
max(plant_spp_by_bee)
pl_stats <- dat %>%
#select(plant.species) %>%
separate(plant.species, c('genus', 'species'), remove = F)
setwd("~/Documents/ManuSCript/script")
library(tidyverse)
commonCrestedButteBees <- c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')
dat <- read.csv('../data/Bombus_queen_observations_2015-2022.csv') %>%
filter(resource.coll != 'nectar', species %in% commonCrestedButteBees)
plant_spp_by_bee <- dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n)
plant_spp_by_bee
min(plant_spp_by_bee)
mean(plant_spp_by_bee)
median(plant_spp_by_bee)
max(plant_spp_by_bee)
pl_stats <- dat %>%
#select(plant.species) %>%
separate(plant.species, c('genus', 'species'), remove = F)
View(pl_stats)
dat %>%
separate(plant.species, c('genus', 'species'), remove = F)
dat <- read.csv('../data/Bombus_queen_observations_2015-2022.csv') %>%
filter(resource.coll != 'nectar', species %in% commonCrestedButteBees)
plant_spp_by_bee <- dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n)
plant_spp_by_bee
min(plant_spp_by_bee)
mean(plant_spp_by_bee)
median(plant_spp_by_bee)
max(plant_spp_by_bee)
dat %>%
separate(plant.species, c('genus', 'species'), remove = F) %>%
select(genus)
View(dat)
dat %>%
separate(plant.species, c('genus', 'species'), remove = F) %>%
select(genus, species)
dat %>%
#  separate(plant.species, c('genus', 'species'), remove = F) %>%
select(genus, species)
dat %>%
separate(plant.species, c('pl_genus', 'species'), remove = F) %>%
select(pl_genus, species)
dat %>%
separate(plant.species, c('pl_genus', 'pl_species'), remove = F) %>%
select(pl_genus, species)
dat %>%
separate(plant.species, c('pl_genus', 'pl_species'), remove = F) %>%
select(pl_genus, species) %>%
distinct()
pl_stats %>%  # number of plant species.
distinct(plant.species, .keep_all = T) %>%
nrow()
pl_stats <- dat %>%
select(plant.species) %>%
separate(plant.species, c('genus', 'species'), remove = F)
pl_stats %>%  # number of plant species.
distinct(plant.species, .keep_all = T) %>%
nrow()
pl_stats %>%  # number of plant species.
distinct(plant.species) %>%
nrow()
dat %>%
separate(plant.species, c('pl_genus', 'pl_species'), remove = F) %>%
select(pl_genus, species) %>%
distinct()
dat %>%
separate(plant.species, c('pl_genus', 'pl_species'), remove = F) %>%
select(pl_genus, species) %>%
distinct()
