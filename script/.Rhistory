View(ref_lib)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(Collection_No = str_remove_all(Collector, '[:alpha:]'))
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collector, '$[, ..]')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collector, '^[, ..]')
)
View(ref_lib)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^[, ..]')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_extract_all(Collector, '[:digits:')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_extract_all(Collector, '[:digits:]') )
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_extract_all(Collector, '[:digit:]') )
View(ref_lib)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_extract_all(Collector, '[0-9]') )
View(ref_lib)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_extract_all(Collector, '[0-9]') )
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^[, ..]')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^[,..]')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^[, ..]')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^, [..]')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^, [.][.]')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^, [.][.] ')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^[0-9]')
)
View(ref_lib)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^*[0-9]')
)
View(ref_lib)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '^.*[0-9]')
)
View(ref_lib)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+')
)
View(ref_lib)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+|[$0-9]')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+|, , [.], , [.],  , [.][.] ')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+|, , [.], , [.],  , [.][.]')
)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
)
View(ref_lib)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, vials) %>%
filter(Voucher_specimen != 'n[/]a')
View(Prospective_samples)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, vials) %>%
filter(Voucher_specimen != 'n/a')
View(Prospective_samples)
View(ref_lib)
View(Prospective_samples)
View(ref_lib)
left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
View(bong)
View(Prospective_samples)
View(ref_lib)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
) %>%
distinct(Collector, .keep_all = T)
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
View(bong)
View(bong)
View(bong)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, vials) %>%
filter(Voucher_specimen != 'n/a')
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
) %>%
distinct(Collector, .keep_all = T)
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
View(bong)
fixed_attributes <- tibble(
'isolate' = 'not applicable',
'cultivar' = 'not applicable',
'ecotype' = 'not applicable',
'age' = 'not collected',
'dev_stage' = 'reproductive',
'treatment' = 'none',
'sex' = 'hermaphrodite',
'sample_type' = 'whole organism',
bioproject_accession = '',
sample_title = '',
.rows = nrow(ref_lib))
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, vials) %>%
filter(Voucher_specimen != 'n/a')
View(Prospective_samples)
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
) %>%
distinct(Collector, .keep_all = T)
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
View(bong)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, vials) %>%
filter(Voucher_specimen != 'n/a')
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
) %>%
distinct(Collector, .keep_all = T)
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
View(bong)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, vials) %>%
filter(Voucher_specimen != 'n/a')
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
) %>%
distinct(Collector, .keep_all = T)
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
View(bong)
View(ref_lib)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample) %>%
filter(Voucher_specimen != 'n/a')
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
) %>%
distinct(Collector, .keep_all = T)
View(ref_lib)
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
# here we import these data which we needed as a table for the manuscript.
ref_lib <- bong %>%
rename(organism = Taxon, collected_by = Collector, ) %>%
mutate(geo_loc_name = paste0(
Country,': ',  State,', ',  County),
tissue = paste('Leaf, ', Pres.), .keep = 'unused')  %>%
mutate(lat_lon = paste(
sub(",.*", "", .$Coordinates), ' N',
sub(".*,", "", .$Coordinates), ' W'), .keep = 'unused') %>%
mutate(biomaterial_provider = case_when(
Herb. == 'CHIC' ~ 'Nyree Zerega, Nancy Poole Rich Herbarium, Chicago Botanic Garden.',
Herb. == 'ID' ~ 'David Tank, Stillinger Herbarium, University of Idaho.',
Herb. == 'RM' ~ 'Burrell Nelson, Rocky Mountain Herbarium, Unviersity of Wyoming.',
Herb. == 'IDS' ~ 'Rick Williams, Ray J. Davis Herbarium, Idaho State University.',
)) %>%
mutate(specimen_voucher = paste0(Herb., ' ', Accession), .keep = 'unused') %>%
mutate(collection_month = case_when(
Date = str_detect(Date, '\\.III\\.') ~ 'Mar',
Date = str_detect(Date, '\\.IV\\.') ~ 'Apr',
Date = str_detect(Date, '\\.V\\.') ~ 'May',
Date = str_detect(Date, '\\.VI\\.') ~ 'Jun',
Date = str_detect(Date, '\\.VII\\.') ~ 'Jul',
Date = str_detect(Date, '\\.VIII\\.') ~ 'Aug',
Date = str_detect(Date, '\\.IX\\.') ~ 'Sep',
Date = str_detect(Date, '\\.X\\.') ~ 'Oct'
))  %>%
mutate(Date = str_remove_all(Date,'I|V|X'), Date = str_replace(Date, '\\.\\.', '\\.')) %>%
mutate(collection_date = paste(sub("\\..*", "", .$Date), collection_month,
sub(".*\\.", "", .$Date), sep = '-')) %>%
bind_cols(fixed_attributes) %>%
mutate(bioproject_accession = 'SUB11601709', sample_title = 'Bombus corbiculae A353') %>%
dplyr::select(
#sample_name,
sample_title, bioproject_accession, organism, # JUST NEED SAMPLE NAME !!! sample_name
geo_loc_name, isolate, cultivar, ecotype, geo_loc_name,
tissue, sample_title, biomaterial_provider, collected_by, collection_date,
lat_lon, sex, specimen_voucher, treatment)
# here we import these data which we needed as a table for the manuscript.
ref_lib <- bong %>%
rename(organism = Taxon, collected_by = Collector, ) %>%
mutate(geo_loc_name = paste0(
Country,': ',  State,', ',  County),
tissue = paste('Leaf, ', Pres.), .keep = 'unused')  %>%
mutate(lat_lon = paste(
sub(",.*", "", .$Coordinates), ' N',
sub(".*,", "", .$Coordinates), ' W'), .keep = 'unused') %>%
mutate(biomaterial_provider = case_when(
Herb. == 'CHIC' ~ 'Nyree Zerega, Nancy Poole Rich Herbarium, Chicago Botanic Garden.',
Herb. == 'ID' ~ 'David Tank, Stillinger Herbarium, University of Idaho.',
Herb. == 'RM' ~ 'Burrell Nelson, Rocky Mountain Herbarium, Unviersity of Wyoming.',
Herb. == 'IDS' ~ 'Rick Williams, Ray J. Davis Herbarium, Idaho State University.',
)) %>%
mutate(specimen_voucher = paste0(Herb., ' ', Accession), .keep = 'unused') %>%
mutate(collection_month = case_when(
Date = str_detect(Date, '\\.III\\.') ~ 'Mar',
Date = str_detect(Date, '\\.IV\\.') ~ 'Apr',
Date = str_detect(Date, '\\.V\\.') ~ 'May',
Date = str_detect(Date, '\\.VI\\.') ~ 'Jun',
Date = str_detect(Date, '\\.VII\\.') ~ 'Jul',
Date = str_detect(Date, '\\.VIII\\.') ~ 'Aug',
Date = str_detect(Date, '\\.IX\\.') ~ 'Sep',
Date = str_detect(Date, '\\.X\\.') ~ 'Oct'
))  %>%
mutate(Date = str_remove_all(Date,'I|V|X'), Date = str_replace(Date, '\\.\\.', '\\.')) %>%
mutate(collection_date = paste(sub("\\..*", "", .$Date), collection_month,
sub(".*\\.", "", .$Date), sep = '-')) %>%
bind_cols(fixed_attributes) %>%
mutate(bioproject_accession = 'SUB11601709', sample_title = 'Bombus corbiculae A353') %>%
dplyr::select(
sample_name,
sample_title, bioproject_accession, organism, # JUST NEED SAMPLE NAME !!! sample_name
geo_loc_name, isolate, cultivar, ecotype, geo_loc_name,
tissue, sample_title, biomaterial_provider, collected_by, collection_date,
lat_lon, sex, specimen_voucher, treatment)
fixed_attributes <- tibble(
'isolate' = 'not applicable',
'cultivar' = 'not applicable',
'ecotype' = 'not applicable',
'age' = 'not collected',
'dev_stage' = 'reproductive',
'treatment' = 'none',
'sex' = 'hermaphrodite',
'sample_type' = 'whole organism',
bioproject_accession = '',
sample_title = '',
.rows = nrow(ref_lib))
# here we import these data which we needed as a table for the manuscript.
ref_lib <- bong %>%
rename(organism = Taxon, collected_by = Collector, ) %>%
mutate(geo_loc_name = paste0(
Country,': ',  State,', ',  County),
tissue = paste('Leaf, ', Pres.), .keep = 'unused')  %>%
mutate(lat_lon = paste(
sub(",.*", "", .$Coordinates), ' N',
sub(".*,", "", .$Coordinates), ' W'), .keep = 'unused') %>%
mutate(biomaterial_provider = case_when(
Herb. == 'CHIC' ~ 'Nyree Zerega, Nancy Poole Rich Herbarium, Chicago Botanic Garden.',
Herb. == 'ID' ~ 'David Tank, Stillinger Herbarium, University of Idaho.',
Herb. == 'RM' ~ 'Burrell Nelson, Rocky Mountain Herbarium, Unviersity of Wyoming.',
Herb. == 'IDS' ~ 'Rick Williams, Ray J. Davis Herbarium, Idaho State University.',
)) %>%
mutate(specimen_voucher = paste0(Herb., ' ', Accession), .keep = 'unused') %>%
mutate(collection_month = case_when(
Date = str_detect(Date, '\\.III\\.') ~ 'Mar',
Date = str_detect(Date, '\\.IV\\.') ~ 'Apr',
Date = str_detect(Date, '\\.V\\.') ~ 'May',
Date = str_detect(Date, '\\.VI\\.') ~ 'Jun',
Date = str_detect(Date, '\\.VII\\.') ~ 'Jul',
Date = str_detect(Date, '\\.VIII\\.') ~ 'Aug',
Date = str_detect(Date, '\\.IX\\.') ~ 'Sep',
Date = str_detect(Date, '\\.X\\.') ~ 'Oct'
))  %>%
mutate(Date = str_remove_all(Date,'I|V|X'), Date = str_replace(Date, '\\.\\.', '\\.')) %>%
mutate(collection_date = paste(sub("\\..*", "", .$Date), collection_month,
sub(".*\\.", "", .$Date), sep = '-')) %>%
mutate(bioproject_accession = 'SUB11601709',
sample_title = 'Bombus corbiculae A353',
'isolate' = 'not applicable',
'cultivar' = 'not applicable',
'ecotype' = 'not applicable',
'age' = 'not collected',
'dev_stage' = 'reproductive',
'treatment' = 'none',
'sex' = 'hermaphrodite',
'sample_type' = 'whole organism',
bioproject_accession = '',
sample_title = '') %>%
dplyr::select(
sample_name,
sample_title, bioproject_accession, organism, # JUST NEED SAMPLE NAME !!! sample_name
geo_loc_name, isolate, cultivar, ecotype, geo_loc_name,
tissue, sample_title, biomaterial_provider, collected_by, collection_date,
lat_lon, sex, specimen_voucher, treatment)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample) %>%
filter(Voucher_specimen != 'n/a')
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
) %>%
distinct(Collector, .keep_all = T)
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
View(bong)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample) %>%
filter(Voucher_specimen != 'n/a')
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
) %>%
distinct(Collector, .keep_all = T)
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
View(bong)
View(bong)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, sample_name = vials) %>%
filter(Voucher_specimen != 'n/a')
ref_lib <- read.csv('Reference_library_for_appendix.csv') %>%
mutate(
Collection_No = str_remove_all(Collector, '[:alpha:]'),
Collection_No = str_remove(Collection_No, '[^0-9]+'),
Collection_No = str_remove(Collection_No, ', , ., , .,  , .. ')
) %>%
distinct(Collector, .keep_all = T)
bong <- left_join(Prospective_samples, ref_lib, by = c('Voucher_specimen' = 'Collection_No'))
# here we import these data which we needed as a table for the manuscript.
ref_lib <- bong %>%
rename(organism = Taxon, collected_by = Collector, ) %>%
mutate(geo_loc_name = paste0(
Country,': ',  State,', ',  County),
tissue = paste('Leaf, ', Pres.), .keep = 'unused')  %>%
mutate(lat_lon = paste(
sub(",.*", "", .$Coordinates), ' N',
sub(".*,", "", .$Coordinates), ' W'), .keep = 'unused') %>%
mutate(biomaterial_provider = case_when(
Herb. == 'CHIC' ~ 'Nyree Zerega, Nancy Poole Rich Herbarium, Chicago Botanic Garden.',
Herb. == 'ID' ~ 'David Tank, Stillinger Herbarium, University of Idaho.',
Herb. == 'RM' ~ 'Burrell Nelson, Rocky Mountain Herbarium, Unviersity of Wyoming.',
Herb. == 'IDS' ~ 'Rick Williams, Ray J. Davis Herbarium, Idaho State University.',
)) %>%
mutate(specimen_voucher = paste0(Herb., ' ', Accession), .keep = 'unused') %>%
mutate(collection_month = case_when(
Date = str_detect(Date, '\\.III\\.') ~ 'Mar',
Date = str_detect(Date, '\\.IV\\.') ~ 'Apr',
Date = str_detect(Date, '\\.V\\.') ~ 'May',
Date = str_detect(Date, '\\.VI\\.') ~ 'Jun',
Date = str_detect(Date, '\\.VII\\.') ~ 'Jul',
Date = str_detect(Date, '\\.VIII\\.') ~ 'Aug',
Date = str_detect(Date, '\\.IX\\.') ~ 'Sep',
Date = str_detect(Date, '\\.X\\.') ~ 'Oct'
))  %>%
mutate(Date = str_remove_all(Date,'I|V|X'), Date = str_replace(Date, '\\.\\.', '\\.')) %>%
mutate(collection_date = paste(sub("\\..*", "", .$Date), collection_month,
sub(".*\\.", "", .$Date), sep = '-')) %>%
mutate(bioproject_accession = 'SUB11601709',
sample_title = 'Bombus corbiculae A353',
'isolate' = 'not applicable',
'cultivar' = 'not applicable',
'ecotype' = 'not applicable',
'age' = 'not collected',
'dev_stage' = 'reproductive',
'treatment' = 'none',
'sex' = 'hermaphrodite',
'sample_type' = 'whole organism',
bioproject_accession = '',
sample_title = '') %>%
dplyr::select(
sample_name,
sample_title, bioproject_accession, organism, # JUST NEED SAMPLE NAME !!! sample_name
geo_loc_name, isolate, cultivar, ecotype, geo_loc_name,
tissue, sample_title, biomaterial_provider, collected_by, collection_date,
lat_lon, sex, specimen_voucher, treatment)
rm(fixed_attributes)
View(ref_lib)
# here we import these data which we needed as a table for the manuscript.
ref_lib <- bong %>%
rename(organism = Taxon, collected_by = Collector, ) %>%
mutate(geo_loc_name = paste0(
Country,': ',  State,', ',  County),
tissue = paste('Leaf, ', Pres.), .keep = 'unused')  %>%
mutate(lat_lon = paste(
sub(",.*", "", .$Coordinates), ' N',
sub(".*,", "", .$Coordinates), ' W'), .keep = 'unused') %>%
mutate(biomaterial_provider = case_when(
Herb. == 'CHIC' ~ 'Nyree Zerega, Nancy Poole Rich Herbarium, Chicago Botanic Garden.',
Herb. == 'ID' ~ 'David Tank, Stillinger Herbarium, University of Idaho.',
Herb. == 'RM' ~ 'Burrell Nelson, Rocky Mountain Herbarium, Unviersity of Wyoming.',
Herb. == 'IDS' ~ 'Rick Williams, Ray J. Davis Herbarium, Idaho State University.',
)) %>%
mutate(specimen_voucher = paste0(Herb., ' ', Accession), .keep = 'unused') %>%
mutate(collection_month = case_when(
Date = str_detect(Date, '\\.III\\.') ~ 'Mar',
Date = str_detect(Date, '\\.IV\\.') ~ 'Apr',
Date = str_detect(Date, '\\.V\\.') ~ 'May',
Date = str_detect(Date, '\\.VI\\.') ~ 'Jun',
Date = str_detect(Date, '\\.VII\\.') ~ 'Jul',
Date = str_detect(Date, '\\.VIII\\.') ~ 'Aug',
Date = str_detect(Date, '\\.IX\\.') ~ 'Sep',
Date = str_detect(Date, '\\.X\\.') ~ 'Oct'
))  %>%
mutate(Date = str_remove_all(Date,'I|V|X'), Date = str_replace(Date, '\\.\\.', '\\.')) %>%
mutate(collection_date = paste(sub("\\..*", "", .$Date), collection_month,
sub(".*\\.", "", .$Date), sep = '-')) %>%
mutate(bioproject_accession = 'SUB11601709',
sample_title = 'Bombus corbiculae A353',
'isolate' = 'not applicable',
'cultivar' = 'not applicable',
'ecotype' = 'not applicable',
'age' = 'not collected',
'dev_stage' = 'reproductive',
'treatment' = 'none',
'sex' = 'hermaphrodite',
'sample_type' = 'whole organism',) %>%
dplyr::select(
sample_name,
sample_title, bioproject_accession, organism, # JUST NEED SAMPLE NAME !!! sample_name
geo_loc_name, isolate, cultivar, ecotype, geo_loc_name,
tissue, sample_title, biomaterial_provider, collected_by, collection_date,
lat_lon, sex, specimen_voucher, treatment)
rm(fixed_attributes, bong, Prospective_samples)
View(ref_lib)
View(ref_lib)
corb <- read.csv('Corbiculae_collections.csv', header = F) %>%
mutate(sample.id = as.numeric(str_extract(V1, '[0-9]{1,2}')),
organism = str_extract(V1, 'Bombus [^ ]+'),
caste = str_trim(str_extract(V1, '[:space:][q|w][:space:]'))) %>%
filter(caste == 'q')  %>%
select(sample.id, organism) %>%
mutate(
'geo_loc_name' = 'Rocky Mountain Biological Laboratory',
'biotic_relationship' = 'free living',
'collection_method' = 'bee squeezer (Kearns 2001)',
'env_broad_scale' = 'Southern Rockies',
'env_local_scale' = 'Upper Montane/Subalpine',
'env_medium' = 'not collected',
'isol_growth_condt' = 'not applicable',
'lat_lon' = '38.9577 N -106.9888'
)
View(corb)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, sample_name = vials) %>%
filter(Voucher_specimen != 'n/a')
View(Prospective_samples)
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, sample_name = vials) %>%
filter(Voucher_specimen == 'n/a')
View(Prospective_samples)
?str_detect
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
select(Voucher_specimen, Sample, sample_name = vials) %>%
filter(Voucher_specimen == 'n/a' & str_detect(Sample, '[A-z]', negate = TRUE))
Prospective_samples <- readxl::read_excel('Prospective_samples.xlsx') %>%
filter(Voucher_specimen == 'n/a' & str_detect(Sample, '[A-z]', negate = TRUE)) %>%
select(Sample)
