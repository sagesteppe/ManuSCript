genus %in% c('Frasera') ~ 'Gentianaceae',
genus %in% c('Hydrophyllum', 'Phacelia') ~ 'Hydrophyllaceae',
genus %in% c('Adenolinum') ~ 'Linaceae',
genus %in% c('Claytonia') ~ 'Montiaceae',
genus %in% c('Pedicularis') ~ 'Orobanchaceae',
genus %in% c('Dodecatheon') ~ 'Primulaceae',
genus %in% c('Aconitum', 'Aquilegia', 'Delphinium', 'Thalictrum') ~ 'Ranunculaceae',
genus %in% c('Erythrocoma', 'Rubus', 'Pentaphylloides', 'Rosa', 'Potentilla') ~ 'Rosaceae',
genus %in% c('Salix') ~ 'Salicaceae'
)) #%>%
pl1 <- pl_stats %>%
mutate(Family = case_when(
genus %in% c('Heracleum', 'Osmorhiza', 'Taraxacum') ~ 'Apiaceae',
genus %in% c('Dugaldia', 'Helianthella', 'Heliomeris', 'Erigeron', 'Senecio') ~ 'Asteraceae',
genus %in% c('Mertensia') ~ 'Boraginaceae',
genus %in% c('Valeriana') ~ 'Valerianaceae',
genus %in% c('Calochortus' ,'Erythronium') ~ 'Liliaceae',
genus %in% c('Distegia') ~ 'Caprifoliaceae',
genus %in% c('Lathyrus', 'Lupinus', 'Vicia' ) ~ 'Fabaceae',
genus %in% c('Frasera') ~ 'Gentianaceae',
genus %in% c('Hydrophyllum', 'Phacelia') ~ 'Hydrophyllaceae',
genus %in% c('Adenolinum') ~ 'Linaceae',
genus %in% c('Claytonia') ~ 'Montiaceae',
genus %in% c('Pedicularis') ~ 'Orobanchaceae',
genus %in% c('Dodecatheon') ~ 'Primulaceae',
genus %in% c('Aconitum', 'Aquilegia', 'Delphinium', 'Thalictrum') ~ 'Ranunculaceae',
genus %in% c('Erythrocoma', 'Rubus', 'Pentaphylloides', 'Rosa', 'Potentilla') ~ 'Rosaceae',
genus %in% c('Salix') ~ 'Salicaceae'
)) %>%
distinct(Family)
View(pl1)
dat <- read.csv('../data/Bombus_queen_observations_2015-2022.csv') %>%
filter(resource.coll != 'nectar', species %in% commonCrestedButteBees)
View(dat)
dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n) %>%
median()
pl_stats <- dat %>%
select(plant.species) %>%
separate(plant.species, c('genus', 'species'), remove = F)
pl_stats %>%
distinct(plant.species) %>%
nrow()
pl_stats %>%  # no of genera by Weber
distinct(genus) %>%
nrow()
pl_stats %>%
distinct(genus)
dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n) %>%
median()
View(dat)
dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n) %>%
mean()
dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n) %>%
max()
dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n)
plant_spp_by_bee <- dat %>%
select(genus, species, plant.species) %>%
distinct() %>%
filter(species %in% c('nevadensis', 'californicus', 'appositus', 'flavifrons', 'rufocinctus', 'mixtus', 'bifarius')) %>%
group_by(species) %>%
count() %>%
pull(n)
median(plant_spp_by_bee)
plant_spp_by_bee
mean(plant_spp_by_bee)
pl_stats %>%  # no of genera by Weber
distinct(genus) %>%
nrow()
library(tidyverse)
library(ggrapch)
library(ggraph)
library(igraph)
data.frame(
Approach =
c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'),
SpeciesCount = c(14000, 1295, 425, 346)
)
flare
library(tidyverse)
library(ggraph)
install.packages('igraph')
install.packages("igraph")
data.frame(
Approach =
c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'),
SpeciesCount = c(14000, 1295, 425, 346),
Process = c('Of the 350,000+ known plant speices, there are currently 14,000+ for which A353 reads exist',
'Regional occurrence data are used to create a list of candidate taxa likely to occur in the study area',
'Spatial filtering of taxa list retains only species likely to be present in study sites',
'Temporal filtering of taxa via phenology modelling refines the metabarcoding results to species likely present at sampling events'
)
)
flare
edges <- flare$edges
?data()
data
data()
library(tidyverse)
library(ggraph)
library(igraph)
flare
edges <- flare$edges
vertices <- flare$vertices
mygraph <- graph_from_data_frame( edges, vertices=vertices )
plot(mygraph)
edges <- flare$edges
vertices <- flare$vertices
mygraph <- graph_from_data_frame( edges, vertices=vertices )
plot(mygraph)
ggraph(mygraph, layout = 'circlepack') +
geom_node_circle() +
theme_void()
View(vertices)
View(edges)
View(vertices)
View(edges)
View(vertices)
edges
View(vertices)
View(edges)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Regional_Plant_Taxa_List', 'Spatial_Filtering'),
to = c('Regional_Plant_Taxa_List', 'Spatial_Filtering', 'Temporal_Filtering'),
)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Regional_Plant_Taxa_List', 'Spatial_Filtering'),
to = c('Regional_Plant_Taxa_List', 'Spatial_Filtering', 'Temporal_Filtering')
)
View(edges1)
vertices1 <- data.frame(
Approach =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
SpeciesCount = c(14000, 1295, 425, 346),
Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
'Occurrence data create a list of candidate taxa likely to occur in the study area',
'Spatial filtering of Occurrence data retains species likely to be present in study sites',
'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
)
)
View(vertices)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
SpeciesCount = c(14000, 1295, 425, 346),
Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
'Occurrence data create a list of candidate taxa likely to occur in the study area',
'Spatial filtering of Occurrence data retains species likely to be present in study sites',
'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
)
)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
'Occurrence data create a list of candidate taxa likely to occur in the study area',
'Spatial filtering of Occurrence data retains species likely to be present in study sites',
'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
)
)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Regional_Plant_Taxa_List', 'Spatial_Filtering'),
to = c('Regional_Plant_Taxa_List', 'Spatial_Filtering', 'Temporal_Filtering')
)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
'Occurrence data create a list of candidate taxa likely to occur in the study area',
'Spatial filtering of Occurrence data retains species likely to be present in study sites',
'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
)
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
View(vertices1)
library(tidyverse)
library(ggraph)
library(igraph)
edges <- flare$edges
vertices <- flare$vertices
View(vertices)
View(vertices)
View(edges)
View(vertices)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Regional_Plant_Taxa_List', 'Spatial_Filtering'),
to = c('Regional_Plant_Taxa_List', 'Spatial_Filtering', 'Temporal_Filtering')
)
View(edges1)
View(edges)
View(edges1)
View(vertices)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Regional_Plant_Taxa_List',
'Spatial_Filtering', 'Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
View(mygraph1)
View(edges)
View(vertices)
View(edges)
View(vertices)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering'),
to = c('Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering')
)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
View(edges1)
edges1 <- data.frame(
from =  c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering'),
to = c('Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering')
)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
View(edges1)
vertices1 <- data.frame(
name =
c('Angiosperms_353', 'Angiosperms_353.Regional_Plant_Taxa_List',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering',
'Angiosperms_353.Regional_Plant_Taxa_List.Spatial_Filtering.Temporal_Filtering'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
View(vertices1)
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
ggraph(mygraph1, layout = 'circlepack')
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle()
mygraph1
ggraph(mygraph, layout = 'circlepack') +
geom_node_circle()
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle()
View(edges)
edges1 <- data.frame(
from =  c('A353', 'A353.RPTL',
'A353.RPTL.SF'),
to = c('A353.RPTL',
'A353.RPTL.SF',
'A353.RPTL.SF.TF')
)
vertices1 <- data.frame(
name =
c('A353', 'A353.RPTL.','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
View(edges)
View(edges1)
vertices1 <- data.frame(
name =
c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle()
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
geom_void()
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
ggraph(mygraph1, layout = 'circlepack', weight=size) +
geom_node_circle() +
theme_void()
edges <- flare$edges
vertices <- flare$vertices
View(edges)
View(vertices)
vertices1 <- data.frame(
name =
c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346),
shortName = c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering')
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
View(vertices1)
rep(c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'), 2)
vertices1 <- data.frame(
name =
rep(c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'), 2),
size = c(14000, 1295, 425, 346, 0, 0, 0, 0),
shortName = rep(c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'), 2)
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
edges1 <- data.frame(
from =  c('A353', 'A353.RPTL',
'A353.RPTL.SF'),
to = c('A353.RPTL',
'A353.RPTL.SF',
'A353.RPTL.SF.TF')
)
vertices1 <- data.frame(
name =
rep(c('A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'), 2),
size = c(14000, 1295, 425, 346, 0, 0, 0, 0),
shortName = rep(c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'), 2)
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
vertices1 <- data.frame(
name =
c('A353-leaf', 'A353.RPTL-leaf','A353.RPTL.SF-leaf', 'A353.RPTL.SF.TF-leaf',
'A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346, 0, 0, 0, 0),
shortName = rep(c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'), 2)
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
edges1 <- data.frame(
from =  c('A353', 'A353.RPTL', 'A353.RPTL.SF',
'A353-leaf', 'A353.RPTL-leaf','A353.RPTL.SF-leaf'),
to = c('A353.RPTL', 'A353.RPTL.SF', 'A353.RPTL.SF.TF',
'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF')
)
edges1 <- data.frame(
from =  c('A353', 'A353.RPTL', 'A353.RPTL.SF',
'A353-leaf', 'A353.RPTL-leaf','A353.RPTL.SF-leaf'),
to = c('A353.RPTL', 'A353.RPTL.SF', 'A353.RPTL.SF.TF',
'A353.RPTL-leaf','A353.RPTL.SF-leaf', 'A353.RPTL.SF.TF-leaf')
)
vertices1 <- data.frame(
name =
c('A353-leaf', 'A353.RPTL-leaf','A353.RPTL.SF-leaf', 'A353.RPTL.SF.TF-leaf',
'A353', 'A353.RPTL','A353.RPTL.SF', 'A353.RPTL.SF.TF'),
size = c(14000, 1295, 425, 346, 0, 0, 0, 0),
shortName = rep(c('Angiosperms 353', 'Regional Plant Taxa List',
'Spatial Filtering', 'Temporal Filtering'), 2)
#  Process = c('Of the 350,000+ known plant species, A353 data exist for 14,000+',
#              'Occurrence data create a list of candidate taxa likely to occur in the study area',
#              'Spatial filtering of Occurrence data retains species likely to be present in study sites',
#              'Temporal filtering of taxa via modelling informs metabarcoding results at multiple time points'
#  )
)
mygraph1 <- graph_from_data_frame( edges1, vertices=vertices1 )
ggraph(mygraph1, layout = 'circlepack', weight=size) +
geom_node_circle() +
theme_void()
rlang::last_trace()
View(mygraph1)
vertices1
ggraph(mygraph1, layout = 'circlepack') +
geom_node_circle() +
theme_void()
